<div class="container my-4">

  <h2 class="mb-4">Catálogo de Videojuegos</h2>

  @if (cargando) {
    <div class="text-center my-5" aria-live="polite" aria-atomic="true">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando datos...</span>
      </div>
      <p class="mt-3">Cargando información desde la API...</p>
    </div>
  } @else {

    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead class="table-dark">
          <tr>
            <th scope="col">Imagen</th>
            <th scope="col">Nombre</th>
            <th scope="col">Fecha de Lanzamiento</th>
            <th scope="col">Valoración</th>
            <th scope="col">Acciones</th>
          </tr>
        </thead>
        <tbody>
          @for (item of datos; track item.id) {
            <tr>
              <td>
                <img [src]="item.background_image"
                     [alt]="'Portada de ' + item.name"
                     class="img-thumbnail"
                     style="width: 80px; height: 60px; object-fit: cover;">
              </td>

              <td>{{ item.name }}</td>

              <td>{{ item.released | date:'dd/MM/yyyy' }}</td>

              <td>
                <span class="badge bg-primary">
                  {{ item.rating | number:'1.1-1' }} ⭐
                </span>
              </td>

              <td>
                <a [routerLink]="['/lista', item.id]"
                   class="btn btn-sm btn-info text-white"
                   [attr.aria-label]="'Ver detalles de ' + item.name">
                  Ver Detalle
                </a>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    <p class="text-muted">
      <strong>Total de elementos:</strong> {{ datos.length }}
    </p>
  }
</div>